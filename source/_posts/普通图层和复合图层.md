---
title: 普通图层和复合图层
date: 2019-03-29 10:36:23
tags: css
---

> 理解浏览器渲染的图层，有利于我们去分析更加复杂的css渲染问题。
> 由于本人学艺暂时不精，本博客只对我所了解的片面知识做一个记录以及总结

浏览器渲染的图层一般包含两大类：普通图层以及复合图层

首先这个图层是对于硬件来说的，也就是GPU。在默认的渲染过程中，都只有一个图层，就是一个默认的复合层。

无论有几个文档流，怎么添加元素都是在这个复合层中渲染的。

当然，我们可以通过开启硬件加速，开启一个新的复合图层。这样在GPU中，会对这个新的图层进行单独绘制。

不同的图层的绘制也是互不影响的，同时这样也是会脱离文档流的。

### 如何开启硬件加速

在浏览器中，如果打开的3d变化，浏览器会自动开启硬件加速(开启一个新的复合图层)。
最常用的方式：`translate3d`、`translateZ`。

很多时候在本身没有使用3D变化的时候，可以用`transform: translateZ(0)`来使用。

还有就是`opacity属性/过渡动画`

### 注意事项

在使用硬件加速的时候，我们应该尽可能的规定index，防止后面的元素也创建复合图层。

因为如果开启硬件加速的元素图层index较低，在它之后的index层级的元素也会创建复合图层。我们应该避免这种情况的出现

### 作用

开启硬件加速，当然可以使页面的动画效果加载的更加流畅。但是，也不能过度的使用，浪费资源，造成卡顿。

同时本身还脱离的文档流，大量的变动也不会引起整个页面重绘，回流

### 总结

图层知识的掌握，就对为什么在做css动画的时候，要去做硬件加速，以及其中的原理，有了一个基础的了解。