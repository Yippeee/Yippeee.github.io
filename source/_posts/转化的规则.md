---
title: == 隐式转化的规则
date: 2019-04-23 18:29:55
tags:
---

> js中==会发生类型转换，这是在一开始学习js的时候都会注意到的点。但是其中的细节，往往没有深究。本文旨在对其中的细节做一个记录与梳理。

# 基本规则

a == b

1. 如果a的类型与b的类型是一样的。 a == b 等同于 a === b. a b 类型不同才进行下面的转化

2. null 和 undefined 在 == 的情况下，默认是相等的。

3. 如果 a b 是 String Number 两种类型中的， 那么在 == 中会转化成number(toNumber) 来做比较。

4. 如果 a b 中有 Boolean 类型的，另一个转化成number(toNumber) 来做比较

5. 如果 a b 其中一个是对象， 而另一个是 String Number Symbol 中的一种。 将会把对象转化成基本类型(toPrimitive)，再进行比对。

> 注意: **5条件的情况是，只有一个是对象，而另一个一定不能是对象，两个都是对象的情形下，是不会发生类型转化的。**  其实这一点看条件一就说的很清楚了，但是每次在遇到 == 的情况下，总想着去转化。记住一点原则，typeOf 值不同才去转化。

6. finally 都不满足的情况下，才返回 false

## toPrimitive

[原文定义](https://www.ecma-international.org/ecma-262/9.0/#sec-toprimitive)

原文说的东西太过于冗杂，经过我理解。觉得就是 valueOf 或者 toString 方法。valueOf 的优先级更高，在没有valueOf 的情况下，才去调用 toString方法

## toNumber

undefined => NaN

null => +0

Boolean: true => 1 ; false => 0

String: 如果直接把 引号 去掉，可以形成一个number就返回这个number，如果不能就返回 NaN

Object: 1. 先使用 toPrimitive  2. 再 toNumber
